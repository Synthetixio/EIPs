---
sip: 2013
title: Dynamic Gas Fee Module
network:  Optimism
status: Draft
type: Governance
author: kaleb (@kaleb-keny)
---

## Simple Summary

The sip proposes to put in place a dynamic gas fee module, which is able to adjust the `minKeeperFee`, within bounds set by governance. Note that the `updateMinKeeperFee` function is a publically callable function that doesn't require any endorsed address for execution.

## Abstract

<!--A short (~200 word) description of the proposed change, the abstract should clearly describe the proposed change. This is what *will* be done if the SIP is implemented, not *why* it should be done or *how* it will be done. If the SIP proposes deploying a new contract, write, "we propose to deploy a new contract that will do x".-->

The `minKeeperFee` module is a standard [Gnosis Safe Module](https://help.safe.global/en/articles/4934378-what-is-a-module) that is able to alter the `minKeeperFee` in our [`PerpsV2MarketSettings`](https://optimistic.etherscan.io/address/0x649F44CAC3276557D03223Dbf6395Af65b11c11c) within bounds specified in the contract and configurable via governance:
- The calculation steps of the minKeeperFee is as follows:
 1) `costOfExecutionGross := gasPrice * gasUnits * dollarPerGwei`
 2) `profitMargin := max(profitMarginUSD; costOfExecution * profitMarginPercent )`
 3) `costOfExecutionNet := costOfExecutionGross + profitMargin`
 4) `minKeeperFee` := `min( max(costOfExecutionNet, minKeeperFeeLowerBound) ; minKeeperFeeUpperBound)`
- The [gas price](https://help.optimism.io/hc/en-us/articles/4411895794715-How-do-transaction-fees-on-Optimism-work-), representing the price of each unit of gas in GWEI, is obtained with the help of a chainlink oracle
- The `dollarPerGwei` is obtained with the on-chain chainlink ETH oracle.  
- The profit margin is incorporated in order to absorb shocks to gas prices on the one hand and to incentivize a decentralised keeper network
- The lower and upper bounds on the `minKeeperFee` are incoporated for safety purposes
- The number of gas units required can be updated in order to account for future changes to perp contracts 


## Motivation

The main motivation is the recent surge and volatility in gas prices which has resulted in all the decentralized keepers to be outpriced and the need to update the `minKeeperFee` in order to bolster the network of decentralized keepers that ensure that orders are executed without delay.

## Specification

Pending Smart Contract Engineers input

### Test Cases

N/A

### Configurable Values (Via SCCP)

- `minKeeperFeeLowerBound` being the lower bound on the minKeeperFee that can be updated
- `minKeeperFeeUpperBound` being the upper bound on the minKeeperFee that can be updated
- `gasUnits` being the number of gas units required to execute a pending offchain delayed order
- `profitMarginPercent` and `profitMarginUSD` determine the profit margin allocated to keepers

## Copyright

Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).
